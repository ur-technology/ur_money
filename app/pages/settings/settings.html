<ion-header>
    <ion-navbar>
        <ion-title>{{"settings.title" | translate}}</ion-title>
        <button clear
            class="right"
            [disabled]="!mainForm.valid"
            (click)="submit()">
            {{"save" | translate}}
        </button>
    </ion-navbar>
</ion-header>
<ion-content padding
    class="settings">
    <form [formGroup]="mainForm">
        <ion-item-group>
            <ion-item-divider light>{{"settings.profileInfo" | translate}}</ion-item-divider>
            <ion-item>
                <ion-input [focuser]
                    type="text"
                    [(ngModel)]="profile.firstName"
                    formControlName="firstName"
                    placeholder="{{'settings.firstName' | translate}}"></ion-input>
            </ion-item>
            <ion-item>
                <ion-input [focuser]
                    type="text"
                    [(ngModel)]="profile.middleName"
                    formControlName="middleName"
                    placeholder="{{'settings.middleName' | translate}}"></ion-input>
            </ion-item>
            <ion-item>
                <ion-input type="text"
                    [(ngModel)]="profile.lastName"
                    formControlName="lastName"
                    placeholder="{{'settings.lastName' | translate}}"></ion-input>
            </ion-item>
            <ion-item>
                <ion-select [(ngModel)]="profile.country"
                    [ngModelOptions]="{standalone: true}"
                    (ionChange)="countrySelected()">
                    <ion-option [value]="c"
                        *ngFor="let c of countries">{{c.name}}</ion-option>
                </ion-select>
            </ion-item>
            <ion-item>
                <ion-select [hidden]="!states || !states.length"
                    [(ngModel)]="profile.state"
                    [ngModelOptions]="{standalone: true}"
                    (ionChange)="stateSelected()">
                    <ion-option [value]="s"
                        *ngFor="let s of states">{{s.name}}</ion-option>
                </ion-select>
                <ion-input [hidden]="states && states.length"
                    type="text"
                    [(ngModel)]="profile.stateName"
                    [ngModelOptions]="{standalone: true}"
                    formControlName="stateName"
                    placeholder="{{'settings.state' | translate}}"></ion-input>
            </ion-item>
            <ion-item>
                <ion-input type="text"
                    [(ngModel)]="profile.city"
                    formControlName="city"
                    placeholder="{{'settings.city' | translate}}"></ion-input>
            </ion-item>
        </ion-item-group>
    </form>
</ion-content>
<ion-footer>
    <button class="sign-out-button" full
        type="text"
        danger
        small
        (click)="signOut()">
        <ion-icon name="power"></ion-icon>{{"signOut" | translate}}
    </button>
</ion-footer>
